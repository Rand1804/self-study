# Debug

## MAP文件

![image-20240227040327295](assets/image-20240227040327295.png)

1. 列出了不同函数间的调用关系
2. 列出了被MDK优化掉的冗余函数
3. 列出了局部标签和全局标签
4. 列出了映像文件的内存映射
5. 列出了映像文件的组件大小（组件指单个的源文件）

![image-20240227041639642](assets/image-20240227041639642.png)

### Symbol Table

![image-20240227043504293](assets/image-20240227043504293.png)

Number类型是不占用大小的，不用管

**i.BusFault_Handler**:`i.`前缀表示在某个文件中的函数，此例在文件stm32f4xx_it.o中（该文件为中断汇集的地方，所有的中断函数建议大家都放这个文件里面，方便管理。如果局部标号里占用大小显示为0,需要去全局标号里查看

![image-20240227043616552](assets/image-20240227043616552.png)

如果同一个函数有带和不带`i.`前缀两种情况同时出现，说明该函数是用`static`声明的，限制了它的作用域只在这个文件中

>  0x80是flash空间的地址
>
> 0x2开始就是RAM地址

![image-20240227045437047](assets/image-20240227045437047.png)

.data 32代表它下面的一段东西共占32bytes。要用地址算，直接按后面标注的字节相加是不准确的

![image-20240227050405046](assets/image-20240227050405046.png)

Data类型表示只读数据，不能更改

![image-20240227050703917](assets/image-20240227050703917.png)

**没有调用过的函数**不占用空间

![image-20240227051139965](assets/image-20240227051139965.png)

这些函数由MDK封装起来了，再汇编启动代码调用`__main`标号后，会陆续调用这些函数，然后才调用`main`函数

![image-20240227052514232](assets/image-20240227052514232.png)

### 映像文件的内存映射

![image-20240227052751307](assets/image-20240227052751307.png)

- **加载域**：简单来说就是大家通过下载器把代码下载到芯片里，下载进去之后它所存储的位置就是加载域
- **运行域**：一旦开始执行这些代码的时候，他们所在的位置就是运行域
- **入口点**：映像中的入口点就是程序开始执行的位置

